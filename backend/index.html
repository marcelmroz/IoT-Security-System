<!DOCTYPE html>
<html>
  <head>
    <title>Threat History</title>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const socket = io();
        const threatList = document.getElementById("threat-list");

        socket.on("new-threat", function (threat) {
          const listItem = document.createElement("li");
          listItem.textContent = `${threat.message} - ${threat.timestamp}`;
          threatList.appendChild(listItem);
        });

        fetch("/api/threats/history")
          .then((response) => response.json())
          .then((threats) => {
            threats.forEach((threat) => {
              const listItem = document.createElement("li");
              listItem.textContent = `${threat.message} - ${threat.timestamp}`;
              threatList.appendChild(listItem);
            });
          });
      });
    </script>
  </head>
  <body>
    <h1>Threat History</h1>
    <ul id="threat-list"></ul>
  </body>
</html>
